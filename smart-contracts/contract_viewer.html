<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!-- Copyright (c) 2015 - Bitquant Research Laboratories (Asia) --
  -- Limited -->
<!-- Redistributable under terms of the Simplified BSD License -->
 <meta charset="UTF-8"> 
<head>
<link href="https://code.jquery.com/ui/1.11.2/themes/ui-lightness/jquery-ui.css" rel="stylesheet"/>
<link href="jquery.appendGrid-1.6.1.min.css" rel="stylesheet"/>
<style>
  .number { text-align: right;
  width: 1in}
  #recalc {
  height: 60px;
  font-size: 22px;
  color: white;
  background: green;
  padding: 0px
  }
</style>
<script src="http://requirejs.org/docs/release/2.1.15/minified/require.js"></script>
<script>
"use strict";
</script>
</head>
<body>
<h1>Contract Viewer</h1>
Copyright (c) 2015 - Bitquant Research Laboratories (Asia) Ltd.<br>
    Redistributable under terms of the Simplified BSD License
<p>
<br>
  <div id="contract_params"></div>
  <p>
  <div id="event_inputs"></div>
<button id="recalc" type="button">Recalculate</button>
<div style="font-family: monospace">
<div id="item"></div>
</div>
<div id="text"></div>
<div id="endnote"></div>

<script>
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    return undefined;
}

var contract = getQueryVariable("contract");
if (contract === undefined) {
    contract = "models/loan";
}

require (["./Viewer"], function(load_viewer) {
    var recalc_button = document.getElementById('recalc');
			recalc_button.style.display = "block";
    load_viewer("./" + contract + "/TermSheet",
		"./" + contract + "/Notes",
			function(calc_function) {
			$("#recalc").click(calc_function);
			calc_function();
		},
		function(err) {
		    analyze_button.style.display = "none";
		    document.getElementById('text').innerHTML =
			'<h3>Error loading ' + contract + '</h3>';
		}
			);
			recalc();
});
</script>
</body>
</html>
